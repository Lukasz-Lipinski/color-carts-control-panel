{"ast":null,"code":"import { map } from 'rxjs';\nimport { ToastDirective } from 'src/app/components/toast/toast.directive';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/components/create-product-form/create-product.service\";\nimport * as i3 from \"src/app/components/toast/toast.service\";\nimport * as i4 from \"../../components/toast/toast.directive\";\nimport * as i5 from \"../../components/products-list/products-list.component\";\nimport * as i6 from \"../../components/searcher/searcher.component\";\nimport * as i7 from \"../../components/updated-form-modal/updated-form-modal.component\";\nimport * as i8 from \"../../components/remove-modal/remove-modal.component\";\nimport * as i9 from \"../../components/pagination/pagination.component\";\nimport * as i10 from \"@angular/common\";\n\nfunction DashboardHomeComponent_app_products_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-products-list\", 6);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"products$\", ctx_r0.products$)(\"pageIndex\", ctx_r0.productsDetails.selectedIndex);\n  }\n}\n\nfunction DashboardHomeComponent_app_pagination_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-pagination\", 7);\n    i0.ɵɵlistener(\"indexEmitter\", function DashboardHomeComponent_app_pagination_3_Template_app_pagination_indexEmitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onChangeIndex($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"indexes\", ctx_r1.productsDetails.indexes)(\"selectedIndex\", ctx_r1.productsDetails.selectedIndex);\n  }\n}\n\nfunction DashboardHomeComponent_app_updated_form_modal_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-updated-form-modal\", 8);\n    i0.ɵɵlistener(\"toastEmitter\", function DashboardHomeComponent_app_updated_form_modal_4_Template_app_updated_form_modal_toastEmitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.setToast($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardHomeComponent_app_remove_modal_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-remove-modal\", 8);\n    i0.ɵɵlistener(\"toastEmitter\", function DashboardHomeComponent_app_remove_modal_6_Template_app_remove_modal_toastEmitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.setToast($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardHomeComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"span\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 11)(4, \"a\", 12);\n    i0.ɵɵtext(5, \" Click here \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" to redirect to login page \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.error == null ? null : ctx_r5.error.msg);\n  }\n}\n\nfunction DashboardHomeComponent_ng_template_10_Template(rf, ctx) {}\n\nexport class DashboardHomeComponent {\n  constructor(activatedRoute, createProductService, toastService) {\n    this.activatedRoute = activatedRoute;\n    this.createProductService = createProductService;\n    this.toastService = toastService;\n    this.error = undefined;\n    this.productsDetails = {\n      indexes: 1,\n      selectedIndex: 1,\n      howManyDisplay: 8\n    };\n    this.searcher = '';\n  }\n\n  ngOnInit() {\n    this.selectedProduct$ = this.createProductService.productDetails$;\n    this.modal$ = this.createProductService.modal$;\n    this.products$ = this.activatedRoute.data.pipe(map(({\n      products\n    }) => {\n      if ('status' in products) {\n        this.error = { ...products\n        };\n        return null;\n      } else {\n        this.productsDetails = { ...this.productsDetails,\n          indexes: products.length % this.productsDetails.howManyDisplay ? Math.ceil(products.length / this.productsDetails.howManyDisplay) : products.length / this.productsDetails.howManyDisplay\n        };\n        this.error = undefined;\n      }\n\n      return this.setSelectedProducts(products);\n    }));\n  }\n\n  onRemoveProduct() {} // compolete it!\n\n\n  setToast(res) {\n    this.toastService.createComponent(this.toast, res);\n  }\n\n  onSearch(parameters) {\n    this.products$ = this.activatedRoute.data.pipe(map(({\n      products\n    }) => {\n      return this.filterProducts(parameters, products);\n    }), map(products => {\n      this.productsDetails = { ...this.productsDetails,\n        selectedIndex: 1\n      };\n      return products && this.setSelectedProducts(products);\n    }));\n  }\n\n  onChangeIndex(index) {\n    this.productsDetails = { ...this.productsDetails,\n      selectedIndex: index\n    };\n    this.products$ = this.activatedRoute.data.pipe(map(({\n      products\n    }) => {\n      return this.filterProducts();\n    }));\n  }\n\n  setSelectedProducts(products) {\n    const lastIndex = this.productsDetails.selectedIndex === 1 ? this.productsDetails.howManyDisplay : this.productsDetails.howManyDisplay * this.productsDetails.selectedIndex + 1;\n    const firstIndex = this.productsDetails.selectedIndex === 1 ? 0 : this.productsDetails.howManyDisplay * this.productsDetails.selectedIndex - this.productsDetails.howManyDisplay;\n    return products.slice(firstIndex, lastIndex);\n  }\n\n  filterProducts(parameters, products) {\n    if (parameters.category.toLowerCase() === 'all') {\n      return products.filter(product => `${product.name}${product.model}${product.brand}`.includes(parameters.product));\n    }\n\n    if (parameters.category.toLowerCase() !== 'all') {\n      return products.filter(product => product.category.toLowerCase() === parameters.category) || null;\n    }\n\n    return products.filter(product => `${product.name}${product.model}${product.brand}`.includes(parameters.product) && product.category.toLowerCase() === parameters.category) || null;\n  }\n\n}\n\nDashboardHomeComponent.ɵfac = function DashboardHomeComponent_Factory(t) {\n  return new (t || DashboardHomeComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CreateProductService), i0.ɵɵdirectiveInject(i3.ToastService));\n};\n\nDashboardHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardHomeComponent,\n  selectors: [[\"app-dashboard-home\"]],\n  viewQuery: function DashboardHomeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(ToastDirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.toast = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 11,\n  vars: 11,\n  consts: [[3, \"searcherEmitter\"], [3, \"products$\", \"pageIndex\", 4, \"ngIf\", \"ngIfElse\"], [3, \"indexes\", \"selectedIndex\", \"indexEmitter\", 4, \"ngIf\"], [3, \"toastEmitter\", 4, \"ngIf\"], [\"Error\", \"\"], [\"appToast\", \"\"], [3, \"products$\", \"pageIndex\"], [3, \"indexes\", \"selectedIndex\", \"indexEmitter\"], [3, \"toastEmitter\"], [1, \"container\"], [1, \"lead\"], [1, \"\"], [\"routerLink\", \"/\", 1, \"link-primary\"]],\n  template: function DashboardHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-searcher\", 0);\n      i0.ɵɵlistener(\"searcherEmitter\", function DashboardHomeComponent_Template_app_searcher_searcherEmitter_0_listener($event) {\n        return ctx.onSearch($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(1, DashboardHomeComponent_app_products_list_1_Template, 1, 2, \"app-products-list\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵtemplate(3, DashboardHomeComponent_app_pagination_3_Template, 1, 2, \"app-pagination\", 2);\n      i0.ɵɵtemplate(4, DashboardHomeComponent_app_updated_form_modal_4_Template, 1, 0, \"app-updated-form-modal\", 3);\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵtemplate(6, DashboardHomeComponent_app_remove_modal_6_Template, 1, 0, \"app-remove-modal\", 3);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtemplate(8, DashboardHomeComponent_ng_template_8_Template, 7, 1, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(10, DashboardHomeComponent_ng_template_10_Template, 0, 0, \"ng-template\", 5);\n    }\n\n    if (rf & 2) {\n      const _r4 = i0.ɵɵreference(9);\n\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 5, ctx.products$))(\"ngIfElse\", _r4);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.error);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 7, ctx.modal$) === \"update\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(7, 9, ctx.modal$) === \"remove\");\n    }\n  },\n  dependencies: [SharedModule, i4.ToastDirective, i5.ProductsListComponent, i6.SearcherComponent, i7.UpdatedFormModalComponent, i8.RemoveModalComponent, i9.PaginationComponent, i10.NgIf, i1.RouterLinkWithHref, i10.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkYXNoYm9hcmQtaG9tZS5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["map","ToastDirective","SharedModule","i0","ctx_r0","ctx_r1","DashboardHomeComponent","constructor","activatedRoute","createProductService","toastService","undefined","indexes","selectedIndex","howManyDisplay","ngOnInit","selectedProduct$","productDetails$","modal$","products$","data","pipe","products","error","productsDetails","length","Math","ceil","setSelectedProducts","onRemoveProduct","setToast","res","createComponent","toast","onSearch","parameters","filterProducts","onChangeIndex","index","lastIndex","firstIndex","slice","category","toLowerCase","filter","product","name","model","brand","includes","selectors","viewQuery","ctx","_r4","i4","styles"],"sourceRoot":"","sources":["C:\\Projects\\Angular\\color-carts-control-panel\\frontend\\src\\app\\dashboard\\dashboard-home\\dashboard-home.component.ts","C:\\Projects\\Angular\\color-carts-control-panel\\frontend\\src\\app\\dashboard\\dashboard-home\\dashboard-home.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable, map } from 'rxjs';\r\nimport { BackendRes } from 'src/app/components/auth/auth.service';\r\nimport {\r\n  CreateProductService,\r\n  ModalType,\r\n} from 'src/app/components/create-product-form/create-product.service';\r\nimport { Product } from 'src/app/components/products-list/product-item/product-item.component';\r\nimport { SearcherParameters } from 'src/app/components/searcher/searcher.component';\r\nimport { ToastDirective } from 'src/app/components/toast/toast.directive';\r\nimport { ToastService } from 'src/app/components/toast/toast.service';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\ninterface ProductsDetails {\r\n  indexes: number;\r\n  selectedIndex: number;\r\n  howManyDisplay: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-dashboard-home',\r\n  templateUrl: './dashboard-home.component.html',\r\n  styleUrls: ['./dashboard-home.component.scss'],\r\n  standalone: true,\r\n  imports: [SharedModule],\r\n})\r\nexport class DashboardHomeComponent\r\n  implements OnInit\r\n{\r\n  @ViewChild(ToastDirective, { static: true })\r\n  toast!: ToastDirective;\r\n  error?: { status: number; msg: string } =\r\n    undefined;\r\n  products$!: Observable<Product[] | null>;\r\n  selectedProduct$!: Observable<Product>;\r\n  modal$!: Observable<ModalType>;\r\n  productsDetails: ProductsDetails = {\r\n    indexes: 1,\r\n    selectedIndex: 1,\r\n    howManyDisplay: 8,\r\n  };\r\n  private searcher: string = '';\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private createProductService: CreateProductService,\r\n    private toastService: ToastService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.selectedProduct$ =\r\n      this.createProductService.productDetails$;\r\n    this.modal$ =\r\n      this.createProductService.modal$;\r\n\r\n    this.products$ =\r\n      this.activatedRoute.data.pipe(\r\n        map(({ products }) => {\r\n          if ('status' in products) {\r\n            this.error = {\r\n              ...products,\r\n            };\r\n            return null;\r\n          } else {\r\n            this.productsDetails = {\r\n              ...this.productsDetails,\r\n              indexes:\r\n                products.length %\r\n                this.productsDetails\r\n                  .howManyDisplay\r\n                  ? Math.ceil(\r\n                      products.length /\r\n                        this.productsDetails\r\n                          .howManyDisplay\r\n                    )\r\n                  : products.length /\r\n                    this.productsDetails\r\n                      .howManyDisplay,\r\n            };\r\n\r\n            this.error = undefined;\r\n          }\r\n          return this.setSelectedProducts(\r\n            products as Product[]\r\n          );\r\n        })\r\n      );\r\n  }\r\n\r\n  onRemoveProduct() {} // compolete it!\r\n\r\n  setToast(res: BackendRes) {\r\n    this.toastService.createComponent(\r\n      this.toast,\r\n      res\r\n    );\r\n  }\r\n\r\n  onSearch(parameters: SearcherParameters) {\r\n    this.products$ =\r\n      this.activatedRoute.data.pipe(\r\n        map(({ products }) => {\r\n          return this.filterProducts(\r\n            parameters,\r\n            products\r\n          );\r\n        }),\r\n        map((products) => {\r\n          this.productsDetails = {\r\n            ...this.productsDetails,\r\n            selectedIndex: 1,\r\n          };\r\n          return (\r\n            products &&\r\n            this.setSelectedProducts(\r\n              products as Product[]\r\n            )\r\n          );\r\n        })\r\n      );\r\n  }\r\n\r\n  onChangeIndex(index: number) {\r\n    this.productsDetails = {\r\n      ...this.productsDetails,\r\n      selectedIndex: index,\r\n    };\r\n\r\n    this.products$ =\r\n      this.activatedRoute.data.pipe(\r\n        map(({ products }) => {\r\n          return this.filterProducts();\r\n        })\r\n      );\r\n  }\r\n\r\n  setSelectedProducts(\r\n    products: Product[]\r\n  ): Product[] {\r\n    const lastIndex =\r\n      this.productsDetails.selectedIndex === 1\r\n        ? this.productsDetails.howManyDisplay\r\n        : this.productsDetails.howManyDisplay *\r\n            this.productsDetails.selectedIndex +\r\n          1;\r\n\r\n    const firstIndex =\r\n      this.productsDetails.selectedIndex === 1\r\n        ? 0\r\n        : this.productsDetails.howManyDisplay *\r\n            this.productsDetails.selectedIndex -\r\n          this.productsDetails.howManyDisplay;\r\n\r\n    return (products as Product[]).slice(\r\n      firstIndex,\r\n      lastIndex\r\n    );\r\n  }\r\n\r\n  filterProducts(\r\n    parameters: SearcherParameters,\r\n    products: Product[]\r\n  ): Product[] {\r\n    if (\r\n      parameters.category.toLowerCase() === 'all'\r\n    ) {\r\n      return products.filter((product: Product) =>\r\n        `${product.name}${product.model}${product.brand}`.includes(\r\n          parameters.product\r\n        )\r\n      );\r\n    }\r\n\r\n    if (\r\n      parameters.category.toLowerCase() !== 'all'\r\n    ) {\r\n      return (\r\n        products.filter(\r\n          (product: Product) =>\r\n            product.category.toLowerCase() ===\r\n            parameters.category\r\n        ) || null\r\n      );\r\n    }\r\n\r\n    return (\r\n      products.filter(\r\n        (product: Product) =>\r\n          `${product.name}${product.model}${product.brand}`.includes(\r\n            parameters.product\r\n          ) &&\r\n          product.category.toLowerCase() ===\r\n            parameters.category\r\n      ) || null\r\n    );\r\n  }\r\n}\r\n","<app-searcher\r\n  (searcherEmitter)=\"onSearch($event)\"\r\n></app-searcher>\r\n\r\n<app-products-list\r\n  *ngIf=\"products$ | async; else Error\"\r\n  [products$]=\"products$\"\r\n  [pageIndex]=\"productsDetails.selectedIndex\"\r\n>\r\n</app-products-list>\r\n\r\n<app-pagination\r\n  *ngIf=\"!error\"\r\n  [indexes]=\"productsDetails.indexes\"\r\n  [selectedIndex]=\"productsDetails.selectedIndex\"\r\n  (indexEmitter)=\"onChangeIndex($event)\"\r\n></app-pagination>\r\n\r\n<app-updated-form-modal\r\n  *ngIf=\"(modal$ | async) === 'update'\"\r\n  (toastEmitter)=\"setToast($event)\"\r\n></app-updated-form-modal>\r\n\r\n<app-remove-modal\r\n  *ngIf=\"(modal$ | async) === 'remove'\"\r\n  (toastEmitter)=\"setToast($event)\"\r\n></app-remove-modal>\r\n\r\n<ng-template #Error>\r\n  <div class=\"container\">\r\n    <span class=\"lead\">{{ error?.msg }}</span>\r\n    <p class=\"\">\r\n      <a\r\n        routerLink=\"/\"\r\n        class=\"link-primary\"\r\n      >\r\n        Click here\r\n      </a>\r\n      to redirect to login page\r\n    </p>\r\n  </div>\r\n</ng-template>\r\n<ng-template appToast></ng-template>\r\n"]},"metadata":{},"sourceType":"module"}