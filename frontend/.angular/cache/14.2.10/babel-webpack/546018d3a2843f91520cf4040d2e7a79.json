{"ast":null,"code":"import { map } from 'rxjs';\nimport { ToastDirective } from 'src/app/components/toast/toast.directive';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/components/create-product-form/create-product.service\";\nimport * as i3 from \"src/app/components/toast/toast.service\";\nimport * as i4 from \"../../components/toast/toast.directive\";\nimport * as i5 from \"../../components/products-list/products-list.component\";\nimport * as i6 from \"../../components/searcher/searcher.component\";\nimport * as i7 from \"../../components/updated-form-modal/updated-form-modal.component\";\nimport * as i8 from \"../../components/remove-modal/remove-modal.component\";\nimport * as i9 from \"../../components/pagination/pagination.component\";\nimport * as i10 from \"@angular/common\";\n\nfunction DashboardHomeComponent_app_products_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-products-list\", 6);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"products$\", ctx_r0.products$);\n  }\n}\n\nfunction DashboardHomeComponent_app_updated_form_modal_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-updated-form-modal\", 7);\n    i0.ɵɵlistener(\"toastEmitter\", function DashboardHomeComponent_app_updated_form_modal_4_Template_app_updated_form_modal_toastEmitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.setToast($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardHomeComponent_app_remove_modal_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-remove-modal\", 7);\n    i0.ɵɵlistener(\"toastEmitter\", function DashboardHomeComponent_app_remove_modal_6_Template_app_remove_modal_toastEmitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.setToast($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardHomeComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"span\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 10)(4, \"a\", 11);\n    i0.ɵɵtext(5, \" Click here \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" to redirect to login page \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.error == null ? null : ctx_r4.error.msg);\n  }\n}\n\nfunction DashboardHomeComponent_ng_template_10_Template(rf, ctx) {}\n\nexport class DashboardHomeComponent {\n  constructor(activatedRoute, createProductService, toastService) {\n    this.activatedRoute = activatedRoute;\n    this.createProductService = createProductService;\n    this.toastService = toastService;\n    this.error = undefined;\n  }\n\n  ngOnInit() {\n    this.selectedProduct$ = this.createProductService.productDetails$;\n    this.modal$ = this.createProductService.modal$;\n    this.products$ = this.activatedRoute.data.pipe(map(({\n      products\n    }) => {\n      if ('status' in products) {\n        this.error = { ...products\n        };\n        return null;\n      }\n\n      this.productsNumber = Math.ceil(products.length / 5);\n      return products;\n    }));\n  }\n\n  onRemoveProduct() {} // compolete it!\n\n\n  setToast(res) {\n    this.toastService.createComponent(this.toast, res);\n  }\n\n  onSearch(parameters) {\n    this.products$ = this.activatedRoute.data.pipe(map(({\n      products\n    }) => {\n      if (parameters.category.toLowerCase() === 'all') {\n        return products.filter(product => `${product.name}${product.model}${product.brand}`.includes(parameters.product));\n      }\n\n      if (parameters.category.toLowerCase() !== 'all') {\n        return products.filter(product => product.category.toLowerCase() === parameters.category) || null;\n      }\n\n      return products.filter(product => `${product.name}${product.model}${product.brand}`.includes(parameters.product) && product.category.toLowerCase() === parameters.category) || null;\n    }));\n  }\n\n}\n\nDashboardHomeComponent.ɵfac = function DashboardHomeComponent_Factory(t) {\n  return new (t || DashboardHomeComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CreateProductService), i0.ɵɵdirectiveInject(i3.ToastService));\n};\n\nDashboardHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardHomeComponent,\n  selectors: [[\"app-dashboard-home\"]],\n  viewQuery: function DashboardHomeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(ToastDirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.toast = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 11,\n  vars: 11,\n  consts: [[3, \"searcherEmitter\"], [3, \"products$\", 4, \"ngIf\", \"ngIfElse\"], [3, \"productsNumber\"], [3, \"toastEmitter\", 4, \"ngIf\"], [\"Error\", \"\"], [\"appToast\", \"\"], [3, \"products$\"], [3, \"toastEmitter\"], [1, \"container\"], [1, \"lead\"], [1, \"\"], [\"routerLink\", \"/\", 1, \"link-primary\"]],\n  template: function DashboardHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-searcher\", 0);\n      i0.ɵɵlistener(\"searcherEmitter\", function DashboardHomeComponent_Template_app_searcher_searcherEmitter_0_listener($event) {\n        return ctx.onSearch($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(1, DashboardHomeComponent_app_products_list_1_Template, 1, 1, \"app-products-list\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelement(3, \"app-pagination\", 2);\n      i0.ɵɵtemplate(4, DashboardHomeComponent_app_updated_form_modal_4_Template, 1, 0, \"app-updated-form-modal\", 3);\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵtemplate(6, DashboardHomeComponent_app_remove_modal_6_Template, 1, 0, \"app-remove-modal\", 3);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtemplate(8, DashboardHomeComponent_ng_template_8_Template, 7, 1, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(10, DashboardHomeComponent_ng_template_10_Template, 0, 0, \"ng-template\", 5);\n    }\n\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(9);\n\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 5, ctx.products$))(\"ngIfElse\", _r3);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"productsNumber\", ctx.productsNumber);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 7, ctx.modal$) === \"update\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(7, 9, ctx.modal$) === \"remove\");\n    }\n  },\n  dependencies: [SharedModule, i4.ToastDirective, i5.ProductsListComponent, i6.SearcherComponent, i7.UpdatedFormModalComponent, i8.RemoveModalComponent, i9.PaginationComponent, i10.NgIf, i1.RouterLinkWithHref, i10.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkYXNoYm9hcmQtaG9tZS5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["map","ToastDirective","SharedModule","i0","DashboardHomeComponent","constructor","activatedRoute","createProductService","toastService","undefined","ngOnInit","selectedProduct$","productDetails$","modal$","products$","data","pipe","products","error","productsNumber","Math","ceil","length","onRemoveProduct","setToast","res","createComponent","toast","onSearch","parameters","category","toLowerCase","filter","product","name","model","brand","includes","selectors","viewQuery","ctx","_r3","i4","styles"],"sourceRoot":"","sources":["C:\\Projects\\Angular\\color-carts-control-panel\\frontend\\src\\app\\dashboard\\dashboard-home\\dashboard-home.component.ts","C:\\Projects\\Angular\\color-carts-control-panel\\frontend\\src\\app\\dashboard\\dashboard-home\\dashboard-home.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable, map } from 'rxjs';\r\nimport { BackendRes } from 'src/app/components/auth/auth.service';\r\nimport {\r\n  CreateProductService,\r\n  ModalType,\r\n} from 'src/app/components/create-product-form/create-product.service';\r\nimport { Product } from 'src/app/components/products-list/product-item/product-item.component';\r\nimport { SearcherParameters } from 'src/app/components/searcher/searcher.component';\r\nimport { ToastDirective } from 'src/app/components/toast/toast.directive';\r\nimport { ToastService } from 'src/app/components/toast/toast.service';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'app-dashboard-home',\r\n  templateUrl: './dashboard-home.component.html',\r\n  styleUrls: ['./dashboard-home.component.scss'],\r\n  standalone: true,\r\n  imports: [SharedModule],\r\n})\r\nexport class DashboardHomeComponent\r\n  implements OnInit\r\n{\r\n  @ViewChild(ToastDirective, { static: true })\r\n  toast!: ToastDirective;\r\n  error?: { status: number; msg: string } =\r\n    undefined;\r\n  products$!: Observable<Product[] | null>;\r\n  selectedProduct$!: Observable<Product>;\r\n  modal$!: Observable<ModalType>;\r\n  productsNumber!: number;\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private createProductService: CreateProductService,\r\n    private toastService: ToastService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.selectedProduct$ =\r\n      this.createProductService.productDetails$;\r\n    this.modal$ =\r\n      this.createProductService.modal$;\r\n\r\n    this.products$ =\r\n      this.activatedRoute.data.pipe(\r\n        map(({ products }) => {\r\n          if ('status' in products) {\r\n            this.error = {\r\n              ...products,\r\n            };\r\n            return null;\r\n          }\r\n          this.productsNumber = Math.ceil(\r\n            products.length / 5\r\n          );\r\n          return products as Product[];\r\n        })\r\n      );\r\n  }\r\n\r\n  onRemoveProduct() {} // compolete it!\r\n\r\n  setToast(res: BackendRes) {\r\n    this.toastService.createComponent(\r\n      this.toast,\r\n      res\r\n    );\r\n  }\r\n\r\n  onSearch(parameters: SearcherParameters) {\r\n    this.products$ =\r\n      this.activatedRoute.data.pipe(\r\n        map(({ products }) => {\r\n          if (\r\n            parameters.category.toLowerCase() ===\r\n            'all'\r\n          ) {\r\n            return products.filter(\r\n              (product: Product) =>\r\n                `${product.name}${product.model}${product.brand}`.includes(\r\n                  parameters.product\r\n                )\r\n            );\r\n          }\r\n\r\n          if (\r\n            parameters.category.toLowerCase() !==\r\n            'all'\r\n          ) {\r\n            return (\r\n              products.filter(\r\n                (product: Product) =>\r\n                  product.category.toLowerCase() ===\r\n                  parameters.category\r\n              ) || null\r\n            );\r\n          }\r\n\r\n          return (\r\n            products.filter(\r\n              (product: Product) =>\r\n                `${product.name}${product.model}${product.brand}`.includes(\r\n                  parameters.product\r\n                ) &&\r\n                product.category.toLowerCase() ===\r\n                  parameters.category\r\n            ) || null\r\n          );\r\n        })\r\n      );\r\n  }\r\n}\r\n","<app-searcher\r\n  (searcherEmitter)=\"onSearch($event)\"\r\n></app-searcher>\r\n\r\n<app-products-list\r\n  *ngIf=\"products$ | async; else Error\"\r\n  [products$]=\"products$\"\r\n>\r\n</app-products-list>\r\n\r\n<app-pagination\r\n  [productsNumber]=\"productsNumber\"\r\n></app-pagination>\r\n\r\n<app-updated-form-modal\r\n  *ngIf=\"(modal$ | async) === 'update'\"\r\n  (toastEmitter)=\"setToast($event)\"\r\n></app-updated-form-modal>\r\n\r\n<app-remove-modal\r\n  *ngIf=\"(modal$ | async) === 'remove'\"\r\n  (toastEmitter)=\"setToast($event)\"\r\n></app-remove-modal>\r\n\r\n<ng-template #Error>\r\n  <div class=\"container\">\r\n    <span class=\"lead\">{{ error?.msg }}</span>\r\n    <p class=\"\">\r\n      <a\r\n        routerLink=\"/\"\r\n        class=\"link-primary\"\r\n      >\r\n        Click here\r\n      </a>\r\n      to redirect to login page\r\n    </p>\r\n  </div>\r\n</ng-template>\r\n<ng-template appToast></ng-template>\r\n"]},"metadata":{},"sourceType":"module"}