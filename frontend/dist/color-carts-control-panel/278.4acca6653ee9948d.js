"use strict";(self.webpackChunkcolor_carts_control_panel=self.webpackChunkcolor_carts_control_panel||[]).push([[278],{4278:(O,_,n)=>{n.r(_),n.d(_,{DashboardHomeComponent:()=>y});var d=n(4004),c=n(4960),m=n(4466),t=n(8256),l=n(8345),u=n(2205),h=n(1596),D=n(2117),E=n(2974),f=n(6199),g=n(1880),x=n(8601),p=n(6895);function C(a,r){if(1&a&&t._UZ(0,"app-products-list",6),2&a){const e=t.oxw();t.Q6J("products$",e.products$)("pageIndex",e.productsDetails.selectedIndex)}}function I(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"app-pagination",7),t.NdJ("indexEmitter",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onChangeIndex(s))}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("indexes",e.productsDetails.indexes)("selectedIndex",e.productsDetails.selectedIndex)}}function P(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"app-updated-form-modal",8),t.NdJ("toastEmitter",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.setToast(s))}),t.qZA()}}function M(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"app-remove-modal",8),t.NdJ("toastEmitter",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.setToast(s))}),t.qZA()}}function v(a,r){if(1&a&&(t.TgZ(0,"div",9)(1,"span",10),t._uU(2),t.qZA(),t.TgZ(3,"p",11)(4,"a",12),t._uU(5," Click here "),t.qZA(),t._uU(6," to redirect to login page "),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Oqu(null==e.error?null:e.error.msg)}}function T(a,r){}let y=(()=>{class a{constructor(e,o,s){this.activatedRoute=e,this.createProductService=o,this.toastService=s,this.error=void 0,this.productsDetails={indexes:1,selectedIndex:1,howManyDisplay:8}}ngOnInit(){this.selectedProduct$=this.createProductService.productDetails$,this.modal$=this.createProductService.modal$,this.products$=this.activatedRoute.data.pipe((0,d.U)(({products:e})=>"status"in e?(this.error={...e},null):(this.setProductDetails(e),this.error=void 0,this.setSelectedProducts(e))))}setToast(e){this.toastService.createComponent(this.toast,e)}onSearch(e){this.searcher=e,this.products$=this.activatedRoute.data.pipe((0,d.U)(({products:o})=>this.filterProducts(e,o)),(0,d.U)(o=>(this.productsDetails={...this.productsDetails,selectedIndex:1},o&&this.setSelectedProducts(o))))}onChangeIndex(e){this.productsDetails={...this.productsDetails,selectedIndex:e},this.products$=this.activatedRoute.data.pipe((0,d.U)(({products:o})=>this.searcher?this.filterProducts(this.searcher,o):o),(0,d.U)(o=>this.setSelectedProducts(o)))}setSelectedProducts(e){return this.setProductDetails(e),e.slice(1===this.productsDetails.selectedIndex?0:this.productsDetails.howManyDisplay*this.productsDetails.selectedIndex-this.productsDetails.howManyDisplay,1===this.productsDetails.selectedIndex?this.productsDetails.howManyDisplay:this.productsDetails.howManyDisplay*this.productsDetails.selectedIndex+1)}filterProducts(e,o){return"all"===e.category.toLowerCase()?o.filter(s=>`${s.name}${s.model}${s.brand}`.includes(e.product)):"all"!==e.category.toLowerCase()?o.filter(s=>s.category.toLowerCase()===e.category)||null:o.filter(s=>`${s.name}${s.model}${s.brand}`.includes(e.product)&&s.category.toLowerCase()===e.category)||null}setProductDetails(e){this.productsDetails={...this.productsDetails,indexes:e.length%this.productsDetails.howManyDisplay?Math.ceil(e.length/this.productsDetails.howManyDisplay):e.length/this.productsDetails.howManyDisplay}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.gz),t.Y36(u.a),t.Y36(h.k))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-home"]],viewQuery:function(e,o){if(1&e&&t.Gf(c._,7),2&e){let s;t.iGM(s=t.CRH())&&(o.toast=s.first)}},standalone:!0,features:[t.jDz],decls:11,vars:11,consts:[[3,"searcherEmitter"],[3,"products$","pageIndex",4,"ngIf","ngIfElse"],[3,"indexes","selectedIndex","indexEmitter",4,"ngIf"],[3,"toastEmitter",4,"ngIf"],["Error",""],["appToast",""],[3,"products$","pageIndex"],[3,"indexes","selectedIndex","indexEmitter"],[3,"toastEmitter"],[1,"container"],[1,"lead"],[1,""],["routerLink","/",1,"link-primary"]],template:function(e,o){if(1&e&&(t.TgZ(0,"app-searcher",0),t.NdJ("searcherEmitter",function(i){return o.onSearch(i)}),t.qZA(),t.YNc(1,C,1,2,"app-products-list",1),t.ALo(2,"async"),t.YNc(3,I,1,2,"app-pagination",2),t.YNc(4,P,1,0,"app-updated-form-modal",3),t.ALo(5,"async"),t.YNc(6,M,1,0,"app-remove-modal",3),t.ALo(7,"async"),t.YNc(8,v,7,1,"ng-template",null,4,t.W1O),t.YNc(10,T,0,0,"ng-template",5)),2&e){const s=t.MAs(9);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,5,o.products$))("ngIfElse",s),t.xp6(2),t.Q6J("ngIf",!o.error),t.xp6(1),t.Q6J("ngIf","update"===t.lcZ(5,7,o.modal$)),t.xp6(2),t.Q6J("ngIf","remove"===t.lcZ(7,9,o.modal$))}},dependencies:[m.m,c._,D.o,E.P,f.w,g.s,x.Q,p.O5,l.yS,p.Ov]}),a})()}}]);