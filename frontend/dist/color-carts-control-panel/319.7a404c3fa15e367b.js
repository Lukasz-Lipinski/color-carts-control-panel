"use strict";(self.webpackChunkcolor_carts_control_panel=self.webpackChunkcolor_carts_control_panel||[]).push([[319],{1319:(Y,p,i)=>{i.r(p),i.d(p,{DashboardHomeComponent:()=>Q});var u=i(4004),m=i(4960),v=i(4466),t=i(8256),g=i(2386),d=i(2205),C=i(1637);const b=["modalDetails",""],Z=[[["","body",""]]],T=["[body]"];let _=(()=>{class o{constructor(){this.closeDialogEmitter=new t.vpe}ngOnInit(){}onCloseDialog(){this.closeDialogEmitter.emit()}onStopPag(e){e.stopPropagation()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal","modalDetails",""]],inputs:{modalDetails:"modalDetails"},outputs:{closeDialogEmitter:"closeDialogEmitter"},attrs:b,ngContentSelectors:T,decls:9,vars:1,consts:[[1,"modal","showModal",3,"click"],[1,"modal-dialog-centered","modal-dialog",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"btn","btn-close",3,"click"],[1,"modal-body"]],template:function(e,n){1&e&&(t.F$t(Z),t.TgZ(0,"div",0),t.NdJ("click",function(){return n.onCloseDialog()}),t.TgZ(1,"div",1),t.NdJ("click",function(l){return n.onStopPag(l)}),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.onCloseDialog()}),t.qZA()(),t.TgZ(7,"div",6),t.Hsn(8),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(n.modalDetails.title))},styles:[".showModal[_ngcontent-%COMP%]{display:block;background-color:#000000a6}"],changeDetection:0}),o})();var c=i(433),h=i(4351),f=i(9646),s=i(6895);function y(o,a){if(1&o&&(t.TgZ(0,"div",3)(1,"span",4),t._uU(2),t.ALo(3,"uppercase"),t.qZA(),t._UZ(4,"input",14),t.qZA()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.label)),t.xp6(2),t.Q6J("formControlName",e.name)}}function P(o,a){if(1&o&&(t.TgZ(0,"option",15),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.mainCategory),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.mainCategory)," ")}}function S(o,a){if(1&o&&(t.TgZ(0,"option",15),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function A(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"Update"),t.qZA())}function N(o,a){1&o&&(t.TgZ(0,"div",16),t._UZ(1,"span",17),t.qZA())}let F=(()=>{class o{constructor(e){this.createProductService=e,this.toastEmitter=new t.vpe,this.spinner={isShown:!1}}ngOnInit(){this.updateForm=new c.cw({amount:new c.NI(this.selectedProduct.amount,{nonNullable:!0}),brand:new c.NI(this.selectedProduct.brand,{nonNullable:!0}),description:new c.NI(this.selectedProduct.description,{nonNullable:!0}),ean:new c.NI(this.selectedProduct.ean,{nonNullable:!0}),model:new c.NI(this.selectedProduct.model,{nonNullable:!0}),name:new c.NI(this.selectedProduct.name,{nonNullable:!0}),price:new c.NI(this.selectedProduct.price,{nonNullable:!0}),category:new c.NI(this.selectedProduct.category,{nonNullable:!0}),subcategory:new c.NI(this.selectedProduct.subcategory,{nonNullable:!0})}),this.updateForm.controls.ean.disable(),this.fields=this.createProductService.getFields(),this.categories=this.createProductService.getCategories(),this.setSubcategoriesAtStart()}setSubcategoriesAtStart(){this.subcategories=this.categories.find(e=>e.mainCategory===this.updateForm.controls.category.value)?.subcategories||[]}onSetSubcategories(){this.setSubcategoriesAtStart(),this.updateForm.controls.subcategory.setValue(this.subcategories[0])}onUpdate(){this.spinner={isShown:!0};const e={id:"",name:"",brand:"",ean:this.selectedProduct.ean,price:0,amount:0,category:"",subcategory:"",description:"",model:""};for(let n in this.updateForm.controls)"ean"!==n&&Object.defineProperty(e,n,{value:this.updateForm.controls[n].value});e.id=this.selectedProduct.id,this.createProductService.updateProduct(e).pipe((0,h.b)(n=>(this.spinner={isShown:!1},(0,f.of)(n)))).subscribe({next:n=>{this.toastEmitter.emit(n)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-product-form"]],inputs:{selectedProduct:"selectedProduct"},outputs:{toastEmitter:"toastEmitter"},decls:20,vars:8,consts:[[1,"container","z-index-upper"],[1,"d-flex","flex-column","align-items-center",3,"formGroup","ngSubmit"],["class","input-group",4,"ngFor","ngForOf"],[1,"input-group"],[1,"input-group-text"],["formControlName","category",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subcategory",1,"form-select"],[1,"container","p-3"],["formControlName","description","rows","10",1,"form-control"],[1,"container"],["type","submit",1,"btn",3,"ngClass","disabled"],[4,"ngIf","ngIfElse"],["Spinner",""],["type","text",1,"form-control",3,"formControlName"],[3,"value"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.onUpdate()}),t.YNc(2,y,5,4,"div",2),t.TgZ(3,"div",3)(4,"span",4),t._uU(5,"Category"),t.qZA(),t.TgZ(6,"select",5),t.NdJ("change",function(){return n.onSetSubcategories()}),t.YNc(7,P,3,4,"option",6),t.qZA()(),t.TgZ(8,"div",3)(9,"span",4),t._uU(10," Subcategory "),t.qZA(),t.TgZ(11,"select",7),t.YNc(12,S,3,4,"option",6),t.qZA()(),t.TgZ(13,"div",8),t._UZ(14,"textarea",9),t.qZA(),t._UZ(15,"div",10),t.TgZ(16,"button",11),t.YNc(17,A,2,0,"span",12),t.qZA()()(),t.YNc(18,N,2,0,"ng-template",null,13,t.W1O)),2&e){const r=t.MAs(19);t.xp6(1),t.Q6J("formGroup",n.updateForm),t.xp6(1),t.Q6J("ngForOf",n.fields),t.xp6(5),t.Q6J("ngForOf",n.categories),t.xp6(5),t.Q6J("ngForOf",n.subcategories),t.xp6(4),t.Q6J("ngClass",n.spinner.isShown?"btn-outline-warning":"btn-outline-primary")("disabled",n.spinner.isShown),t.xp6(1),t.Q6J("ngIf",!n.spinner.isShown)("ngIfElse",r)}},dependencies:[s.mk,s.sg,s.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u,s.gd],styles:["textarea[_ngcontent-%COMP%]{resize:none}.z-index-upper[_ngcontent-%COMP%]{z-index:5}"],changeDetection:0}),o})(),U=(()=>{class o{constructor(e){this.createProductService=e,this.modalDetails={title:"Updating product"},this.toastEmitter=new t.vpe}ngOnInit(){this.selectedProduct$=this.createProductService.productDetails$}onCloseModal(){this.createProductService.modal$.next("")}onToastEmitter(e){this.toastEmitter.emit(e),this.createProductService.modal$.next("")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-updated-form-modal"]],outputs:{toastEmitter:"toastEmitter"},decls:3,vars:4,consts:[[3,"modalDetails","closeDialogEmitter"],["body","",3,"selectedProduct","toastEmitter"]],template:function(e,n){1&e&&(t.TgZ(0,"app-modal",0),t.NdJ("closeDialogEmitter",function(){return n.onCloseModal()}),t.TgZ(1,"app-update-product-form",1),t.NdJ("toastEmitter",function(l){return n.onToastEmitter(l)}),t.ALo(2,"async"),t.qZA()()),2&e&&(t.Q6J("modalDetails",n.modalDetails),t.xp6(1),t.Q6J("selectedProduct",t.lcZ(2,2,n.selectedProduct$)))},dependencies:[_,F,s.Ov],changeDetection:0}),o})(),D=(()=>{class o{constructor(e){this.createProductService=e,this.modalDetails={title:"Removing product"},this.toastEmitter=new t.vpe}ngOnInit(){this.createProductService.productDetails$.subscribe({next:e=>{this.selectedProduct=e}})}onCloseModal(){this.createProductService.modal$.next("")}onRemoveProduct(){const{ean:e,id:n}=this.selectedProduct;this.createProductService.deleteProduct({id:n,ean:e}).pipe((0,h.b)(r=>(r.status<300&&r.status>=200&&this.createProductService.modal$.next(""),(0,f.of)(r)))).subscribe({next:r=>this.toastEmitter.emit(r)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-remove-modal"]],outputs:{toastEmitter:"toastEmitter"},decls:9,vars:1,consts:[[3,"modalDetails","closeDialogEmitter"],["body","",1,"container"],[1,"fw-semibold","text-center","fs-4"],[1,"container","d-flex","justify-content-evenly"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"app-modal",0),t.NdJ("closeDialogEmitter",function(){return n.onCloseModal()}),t.TgZ(1,"div",1)(2,"p",2),t._uU(3," Are you sure to remove this product? "),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.onRemoveProduct()}),t._uU(6," Delete "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.onCloseModal()}),t._uU(8," Cancel "),t.qZA()()()()),2&e&&t.Q6J("modalDetails",n.modalDetails)},dependencies:[_],changeDetection:0}),o})();function E(o,a){if(1&o&&(t.TgZ(0,"option",9),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.mainCategory),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.mainCategory)," ")}}let w=(()=>{class o{constructor(e){this.createProductService=e,this.searcherEmitter=new t.vpe}ngOnInit(){this.searcherForm=new c.cw({searcher:new c.NI("",{nonNullable:!0}),category:new c.NI("all",{nonNullable:!0,validators:[c.kI.required]})}),this.categories=this.createProductService.getCategories()}onSearch(e){const n={category:this.searcherForm.controls.category.value,product:this.searcherForm.controls.searcher.value};e instanceof KeyboardEvent&&"Enter"===e.code&&this.searcherForm.valid&&this.searcherEmitter.emit(n),e instanceof SubmitEvent&&this.searcherForm.valid&&this.searcherEmitter.emit(n)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-searcher"]],outputs:{searcherEmitter:"searcherEmitter"},decls:10,vars:3,consts:[[1,"container-fluid"],[3,"formGroup","ngSubmit"],[1,"input-group"],["type","search","formControlName","searcher","placeholder","Find product",1,"form-control","w-50",3,"keydown"],["formControlName","category",1,"form-select"],["selected","","value","all"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],[1,"bi","bi-search"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(l){return n.onSearch(l)}),t.TgZ(2,"div",2)(3,"input",3),t.NdJ("keydown",function(l){return n.onSearch(l)}),t.qZA(),t.TgZ(4,"select",4)(5,"option",5),t._uU(6," ALL "),t.qZA(),t.YNc(7,E,3,4,"option",6),t.qZA(),t.TgZ(8,"button",7),t._UZ(9,"span",8),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.searcherForm),t.xp6(6),t.Q6J("ngForOf",n.categories),t.xp6(1),t.Q6J("disabled",n.searcherForm.invalid))},dependencies:[s.sg,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u,s.gd]}),o})();const J=["product",""];let x=(()=>{class o{constructor(e){this.createProductService=e}ngOnInit(){}onUpdate(){this.createProductService.modal$.next("update"),this.createProductService.productDetails$.next(this.product)}onDeleteProduct(){this.createProductService.modal$.next("remove"),this.createProductService.productDetails$.next(this.product)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-item","product",""]],inputs:{product:"product"},attrs:J,decls:31,vars:14,consts:[[1,"list-group-item","d-flex","align-items-center","justify-content-between","p-4"],[1,"fs-5","row","container-fluid"],[1,"col-12","text-center"],[1,"h4"],[1,"text-gray","fst-italic"],[1,"row-cols-2","row","container","p-4"],[1,"col","d-flex","align-items-center","flex-column"],[1,"row"],[1,"col","d-flex","flex-column","align-items-center"],[1,"h5"],[1,"d-flex","gap-3"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"li",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4),t.ALo(5,"uppercase"),t.ALo(6,"uppercase"),t.TgZ(7,"span",4),t._uU(8),t.qZA()()(),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7),t._uU(12),t.qZA(),t.TgZ(13,"div",7),t._uU(14),t.qZA()(),t.TgZ(15,"div",8)(16,"span"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.qZA()()(),t.TgZ(21,"div",8)(22,"span",9),t._uU(23,"Description: "),t.qZA(),t.TgZ(24,"span"),t._uU(25),t.qZA()()(),t.TgZ(26,"div",10)(27,"button",11),t.NdJ("click",function(){return n.onUpdate()}),t._uU(28," Update "),t.qZA(),t.TgZ(29,"button",12),t.NdJ("click",function(){return n.onDeleteProduct()}),t._uU(30," Delete "),t.qZA()()()),2&e&&(t.xp6(4),t.AsE(" ",t.lcZ(5,8,n.product.brand)," ",t.lcZ(6,10,n.product.model)," "),t.xp6(4),t.hij("(",n.product.name,")"),t.xp6(4),t.hij(" Category: ",n.product.category," "),t.xp6(2),t.hij(" Subcategory: ",n.product.subcategory," "),t.xp6(3),t.hij(" Price: ",t.lcZ(18,12,n.product.price)," "),t.xp6(3),t.hij(" Amount: ",n.product.amount," "),t.xp6(5),t.Oqu(n.product.description))},dependencies:[s.gd,s.H9],styles:[".text-gray[_ngcontent-%COMP%]{color:#737373}"],changeDetection:0}),o})();function $(o,a){1&o&&t._UZ(0,"app-product-item",2),2&o&&t.Q6J("product",a.$implicit)}let I=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products-list"]],inputs:{products$:"products$"},decls:3,vars:3,consts:[[1,"list-group","py-3","gap-3"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(e,n){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,$,1,1,"app-product-item",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.products$)))},dependencies:[s.sg,x,s.Ov]}),o})();function M(o,a){if(1&o&&t._UZ(0,"app-products-list",5),2&o){const e=t.oxw();t.Q6J("products$",e.products$)}}function q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-updated-form-modal",6),t.NdJ("toastEmitter",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.setToast(r))}),t.qZA()}}function O(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-remove-modal",6),t.NdJ("toastEmitter",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.setToast(r))}),t.qZA()}}function L(o,a){if(1&o&&(t.TgZ(0,"div",7)(1,"span",8),t._uU(2),t.qZA(),t.TgZ(3,"p",9)(4,"a",10),t._uU(5," Click here "),t.qZA(),t._uU(6," to redirect to login page "),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(null==e.error?null:e.error.msg)}}function k(o,a){}let Q=(()=>{class o{constructor(e,n,r){this.activatedRoute=e,this.createProductService=n,this.toastService=r,this.error=void 0}ngOnInit(){this.selectedProduct$=this.createProductService.productDetails$,this.modal$=this.createProductService.modal$,this.products$=this.activatedRoute.data.pipe((0,u.U)(({products:e})=>"status"in e?(this.error={...e},null):e))}onRemoveProduct(){}setToast(e){this.toastService.createComponent(this.toast,e)}onSearch(e){this.products$=this.activatedRoute.data.pipe((0,u.U)(({products:n})=>"all"===e.category.toLowerCase()?n.filter(r=>`${r.name}${r.model}${r.brand}`.includes(e.product)):"all"!==e.category.toLowerCase()?n.filter(r=>r.category.toLowerCase()===e.category)||null:n.filter(r=>`${r.name}${r.model}${r.brand}`.includes(e.product)&&r.category.toLowerCase()===e.category)||null))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz),t.Y36(d.a),t.Y36(C.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-home"]],viewQuery:function(e,n){if(1&e&&t.Gf(m._,7),2&e){let r;t.iGM(r=t.CRH())&&(n.toast=r.first)}},standalone:!0,features:[t.jDz],decls:10,vars:10,consts:[[3,"searcherEmitter"],[3,"products$",4,"ngIf","ngIfElse"],[3,"toastEmitter",4,"ngIf"],["Error",""],["appToast",""],[3,"products$"],[3,"toastEmitter"],[1,"container"],[1,"lead"],[1,""],["routerLink","/",1,"link-primary"]],template:function(e,n){if(1&e&&(t.TgZ(0,"app-searcher",0),t.NdJ("searcherEmitter",function(l){return n.onSearch(l)}),t.qZA(),t.YNc(1,M,1,1,"app-products-list",1),t.ALo(2,"async"),t.YNc(3,q,1,0,"app-updated-form-modal",2),t.ALo(4,"async"),t.YNc(5,O,1,0,"app-remove-modal",2),t.ALo(6,"async"),t.YNc(7,L,7,1,"ng-template",null,3,t.W1O),t.YNc(9,k,0,0,"ng-template",4)),2&e){const r=t.MAs(8);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,4,n.products$))("ngIfElse",r),t.xp6(2),t.Q6J("ngIf","update"===t.lcZ(4,6,n.modal$)),t.xp6(2),t.Q6J("ngIf","remove"===t.lcZ(6,8,n.modal$))}},dependencies:[v.m,U,D,w,m._,I,s.O5,g.yS,s.Ov]}),o})()}}]);